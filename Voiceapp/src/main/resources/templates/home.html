<!DOCTYPE html>
<html xmlns:th="https://thymeleaf.org" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    <script src="https://code.responsivevoice.org/responsivevoice.js?key=eeSEupXA"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>    
    <title>Text-to-Speech Dashboard</title>
    <style>
        .bi{
            font-size:18px;
         }
        .card-body{
            padding:30px;
            line-height:200%;
            font-weight:600;
            word-wrap: break-word;
        }
        .card-header{
            background-color:#171430;
            color:white;
            padding:10px;
        }
        .card {
            width:70%;
        }
        .btn-primary{
            width:20%;
            font-weight:600;
        }
        .form-select{
            width:40%;
        }
        .nav-link:hover{
          background-color:white;
          color:black;
          font-weight:bold;          
        } 
    </style>
</head>
<body style="background-color:#E99DCB">
    <div class="container-fluid">
        <div class="row">
            <div class="col-sm">
                <nav class="navbar navbar-expand-lg navbar-dark bg-dark" style="padding:30px;">
                    <div class="container-fluid">
                        <a class="navbar-brand" href="#"><i class="bi bi-file-text-fill"></i>&nbsp;&nbsp;TextToSpeech&nbsp;&nbsp;<i class="bi bi-file-music-fill"></i></a>
                        <div class="collapse navbar-collapse">
                            <div class="navbar-nav">
                                <a class="nav-link" href="/text-to-speech/dashboard">Features</a>    
                                <a class="nav-link" href="/text-to-speech/save">Save/Update Text</a>                                              
                                <a class="nav-link" href="/text-to-speech/updateProfile">Update profile</a>
                              </div>
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <h6 th:text="'Hello '+${session.sessionEmailId}" style="color:white; font-weight:bold; margin-left:90%"/>
                    </div>
                    <div class="col-sm-3">
                        <a href="/logout"><button class="btn btn-primary" style="font-weight:bold; width:30%; margin-left:55%"><i class="bi bi-door-open-fill"></i>&nbsp;&nbsp;Logout</button></a>
                    </div>
                </nav>
            </div>
        </div><br>
        <div class="row">
            <div class="container">                
                <div class="row" style="margin-left:27%"><h4>Features :</h4></div>
                <div class="row" style="margin-left:25%">
                    <div class="col-sm">
                        <div class="container mt-3">
                            <div class="card">
                                <div class="card-header"><h5>Text to Speech<span style="margin-left:60%"><button class="btn btn-primary" onclick="textTospeech()"><i class="bi bi-play-circle-fill"></i>&nbsp;&nbsp;Play</button></span></h5></div>
                                <div class="card-body" id="demo1">This example shows how to setup a Play button that speaks pre-determined text.
                                    This is example code to add anywhere in a page where you want the play button to appear.</div>
                            </div>
                        </div>
                    </div>
                </div><br>
                <div class="row" style="margin-left:25%">
                    <div class="col-sm">
                        <div class="container mt-3">
                            <div class="card">
                                <div class="card-header"><h5>Highlight Text to Speech <small>( Highlight any text from this current window )</small></h5></div>
                                <div class="card-body">This example shows how to speak any User Selected Text when they complete highlighting(mouseup).
                                    This is example code to add just before the closing body tag.</div>
                            </div>
                        </div>
                    </div>
                </div><br>
                <div class="row" style="margin-left:25%">
                    <div class="col-sm">
                        <div class="container mt-3">
                            <div class="card">
                                <div class="card-header"><h5>Text to Speech with background audio</h5></div>
                                <div class="card-body" id="demo2">This example shows how to have audio play as a background whilst text to speech is active. This has the benefit of psychologically ‘smoothing out’ the quirks of text to speech, thereby increasing the perceived quality.
                                    This is example code to add anywhere in the page you would like the button to appear.<br><br>
                                    <audio loop="false" width="0" height="0" id="sound" src="http://responsivevoice.org/wp-content/uploads/2015/06/Peppy-The-Firing-Squad_YMXB-160.mp3" type="audio/mp3" ></audio>
                                    <span>
                                        <button class="btn btn-primary" style="margin-left:6%; width:25%" onclick="playText()"><i class="bi bi-play-circle-fill"></i>&nbsp;&nbsp;Play plain text</button>
                                    </span>                                    
                                        <span><button class="btn btn-primary" style="margin-left:6%; width:25%" onclick="playTextWithAudio()"><i class="bi bi-music-note-list"></i>&nbsp;&nbsp;Play with audio</button>
                                    </span>
                                    </span>                                    
                                        <span><button class="btn btn-primary" style="margin-left:6%; width:25%" onclick="stopAudio()"><i class="bi bi-volume-mute-fill"></i>&nbsp;&nbsp;Stop audio</button>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>              
        function textTospeech(){
            const text=document.getElementById("demo1").innerText;                        
            responsiveVoice.speak(text)                                         
        }

        function getSelectionText() {
            var text = "";
            if (window.getSelection) {
                text = window.getSelection().toString();                
            }
            else if (document.selection && document.selection.type != "Control") {
                text = document.selection.createRange().text;
            }
            return text;
        }

        $(document).ready(function (){
           $(document).mouseup(function (e){
              setTimeout(function() {
                 responsiveVoice.cancel();
                 responsiveVoice.speak(getSelectionText())
              }, 1);
           });
        });

        function playText(){            
            responsiveVoice.speak(document.getElementById("demo2").innerText)
            document.getElementById("sound").pause()
        }        

        function playTextWithAudio(){            
            const text=responsiveVoice.speak(document.getElementById("demo2").innerText)
            document.getElementById("sound").play()            
        }       
        
        function stopAudio(){
            document.getElementById("sound").pause()
        }
    </script>
</body>
</html>
